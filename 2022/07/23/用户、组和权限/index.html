

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/yindong.github.io/img/favicon.png">
  <link rel="icon" href="/yindong.github.io/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="7 ç”¨æˆ·ã€ç»„å’Œæƒé™å†…å®¹æ¦‚è¿°  Linuxçš„å®‰å…¨æ¨¡å‹ ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶ ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤ ç†è§£å¹¶è®¾ç½®æ–‡ä»¶æƒé™ é»˜è®¤æƒé™ ç‰¹æ®Šæƒé™ æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨  7.1 Linuxå®‰å…¨æ¨¡å‹èµ„æºåˆ†æ´¾ï¼š  Authentlcat;on: è®¤è¯ï¼›éªŒè¯ç”¨æˆ·èº«ä»½ Authorizationï¼šæˆæƒï¼›ä¸åŒçš„ç”¨æˆ·è®¾ç½®ä¸åŒæƒé™ Accouting|Auditionï¼šå®¡è®¡ï¼›  å½“ç”¨æˆ·ç™»å…¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä»¤ç‰Œtokenï¼ŒåŒ…æ‹¬ç”¨æˆ·è¡¨">
<meta property="og:type" content="article">
<meta property="og:title" content="ç”¨æˆ·ã€ç»„å’Œæƒé™">
<meta property="og:url" content="https://lannister163.github.io/yindong.github.io/2022/07/23/%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84%E5%92%8C%E6%9D%83%E9%99%90/index.html">
<meta property="og:site_name" content="é˜´ä¸œ">
<meta property="og:description" content="7 ç”¨æˆ·ã€ç»„å’Œæƒé™å†…å®¹æ¦‚è¿°  Linuxçš„å®‰å…¨æ¨¡å‹ ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶ ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤ ç†è§£å¹¶è®¾ç½®æ–‡ä»¶æƒé™ é»˜è®¤æƒé™ ç‰¹æ®Šæƒé™ æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨  7.1 Linuxå®‰å…¨æ¨¡å‹èµ„æºåˆ†æ´¾ï¼š  Authentlcat;on: è®¤è¯ï¼›éªŒè¯ç”¨æˆ·èº«ä»½ Authorizationï¼šæˆæƒï¼›ä¸åŒçš„ç”¨æˆ·è®¾ç½®ä¸åŒæƒé™ Accouting|Auditionï¼šå®¡è®¡ï¼›  å½“ç”¨æˆ·ç™»å…¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä»¤ç‰Œtokenï¼ŒåŒ…æ‹¬ç”¨æˆ·è¡¨">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-07-23T03:35:11.000Z">
<meta property="article:modified_time" content="2022-07-23T03:36:15.434Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  <title>ç”¨æˆ·ã€ç»„å’Œæƒé™ - é˜´ä¸œ</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/yindong.github.io/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"lannister163.github.io","root":"/yindong.github.io/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"knuxEHqBq6jIyCQJbdTG3FkD-gzGzoHsz","app_key":"cSdmOPjJK71fCLznx58yl98p","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/yindong.github.io/local-search.xml"};
  </script>
  <script  src="/yindong.github.io/js/utils.js" ></script>
  <script  src="/yindong.github.io/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.2"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/yindong.github.io/">
      <strong>Don&#39;t forget to smile</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/yindong.github.io/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/yindong.github.io/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/yindong.github.io/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/yindong.github.io/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/yindong.github.io/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/yindong.github.io/img/wenzhang.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="ç”¨æˆ·ã€ç»„å’Œæƒé™">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-07-23 03:35" pubdate>
        2022å¹´7æœˆ23æ—¥ å‡Œæ™¨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      14k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      113 åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- LeanCloud ç»Ÿè®¡æ–‡ç« PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">ç”¨æˆ·ã€ç»„å’Œæƒé™</h1>
            
            <div class="markdown-body">
              <h2 id="7-ç”¨æˆ·ã€ç»„å’Œæƒé™"><a href="#7-ç”¨æˆ·ã€ç»„å’Œæƒé™" class="headerlink" title="7 ç”¨æˆ·ã€ç»„å’Œæƒé™"></a>7 ç”¨æˆ·ã€ç»„å’Œæƒé™</h2><p><strong>å†…å®¹æ¦‚è¿°</strong></p>
<ul>
<li>Linuxçš„å®‰å…¨æ¨¡å‹</li>
<li>ç”¨æˆ·å’Œç»„ç›¸å…³æ–‡ä»¶</li>
<li>ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤</li>
<li>ç†è§£å¹¶è®¾ç½®æ–‡ä»¶æƒé™</li>
<li>é»˜è®¤æƒé™</li>
<li>ç‰¹æ®Šæƒé™</li>
<li>æ–‡ä»¶è®¿é—®æ§åˆ¶åˆ—è¡¨</li>
</ul>
<h3 id="7-1-Linuxå®‰å…¨æ¨¡å‹"><a href="#7-1-Linuxå®‰å…¨æ¨¡å‹" class="headerlink" title="7.1 Linuxå®‰å…¨æ¨¡å‹"></a>7.1 Linuxå®‰å…¨æ¨¡å‹</h3><p>èµ„æºåˆ†æ´¾ï¼š</p>
<ul>
<li>Authentlcat;on: è®¤è¯ï¼›éªŒè¯ç”¨æˆ·èº«ä»½</li>
<li>Authorizationï¼šæˆæƒï¼›ä¸åŒçš„ç”¨æˆ·è®¾ç½®ä¸åŒæƒé™</li>
<li>Accouting|Auditionï¼šå®¡è®¡ï¼›</li>
</ul>
<p>å½“ç”¨æˆ·ç™»å…¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ†é…ä»¤ç‰Œtokenï¼ŒåŒ…æ‹¬ç”¨æˆ·è¡¨ç¤ºå’Œç»„æˆå‘˜ç­‰ä¿¡æ¯</p>
<h4 id="7-1-1-ç”¨æˆ·"><a href="#7-1-1-ç”¨æˆ·" class="headerlink" title="7.1.1 ç”¨æˆ·"></a>7.1.1 ç”¨æˆ·</h4><p>Linuxä¸­æ¯ä¸ªç”¨æˆ·æ˜¯é€šè¿‡User ID ï¼ˆUIDï¼‰æ¥å”¯ä¸€æ ‡è¯†</p>
<ul>
<li><p>ç®¡ç†å‘˜ï¼šrootï¼Œ0</p>
</li>
<li><p>æ™®é€šç”¨æˆ·ï¼š1-60000 è‡ªåŠ¨åˆ†é…</p>
<ul>
<li><p>ç³»ç»Ÿç”¨æˆ·ï¼š1-499ï¼ˆCentOS6ä»¥å‰ï¼‰ï¼Œ1-999ï¼ˆCentOS7ä»¥åï¼‰</p>
<p>å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…</p>
</li>
<li><p>ç™»å…¥ç”¨æˆ·ï¼š500+ ï¼ˆCentOS6ä»¥å‰ï¼‰ï¼Œ1000+ï¼ˆCentOS7ä»¥åï¼‰</p>
<p>äº¤äº’å¼ç™»å…¥</p>
</li>
</ul>
</li>
</ul>
<h4 id="7-1-2-ç”¨æˆ·ç»„"><a href="#7-1-2-ç”¨æˆ·ç»„" class="headerlink" title="7.1.2 ç”¨æˆ·ç»„"></a>7.1.2 ç”¨æˆ·ç»„</h4><p>Linuxä¸­å¯ä»¥å°†ä¸€ä¸ªæˆ–å¤šä¸ªç”¨æˆ·åŠ å…¥ç”¨æˆ·ç»„ä¸­ï¼Œç”¨æˆ·ç»„é€šè¿‡Group ID ï¼ˆGIDï¼‰ æ¥å”¯ä¸€æ ‡è¯†çš„ã€‚</p>
<ul>
<li>ç®¡ç†å‘˜ç»„ï¼šrootï¼Œ0</li>
<li>æ™®é€šç»„ï¼š<ul>
<li>ç³»ç»Ÿç»„ï¼š1-499,1-999ï¼ˆCentOS7ä»¥åï¼‰å¯¹å®ˆæŠ¤è¿›ç¨‹è·å–èµ„æºè¿›è¡Œæƒé™åˆ†é…</li>
<li>æ™®é€šç»„ï¼š500+ï¼Œ1000+ (CentOS7ä»¥åï¼‰ç»™ç”¨æˆ·ä½¿ç”¨</li>
</ul>
</li>
</ul>
<h4 id="7-1-3-ç”¨æˆ·å’Œç»„çš„å…³ç³»"><a href="#7-1-3-ç”¨æˆ·å’Œç»„çš„å…³ç³»" class="headerlink" title="7.1.3 ç”¨æˆ·å’Œç»„çš„å…³ç³»"></a>7.1.3 ç”¨æˆ·å’Œç»„çš„å…³ç³»</h4><ul>
<li>ç”¨æˆ·çš„ä¸»è¦ç»„(primary group):ç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªä¸”åªæœ‰ä¸€ä¸ªä¸»ç»„ï¼Œé»˜è®¤åˆ›å»ºç”¨æˆ·æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„ç»„ï¼Œåšä¸ºç”¨æˆ·çš„ä¸»è¦ç»„ï¼Œç”±äºæ­¤ç»„ä¸­åªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œåˆç§°ä¸ºç§æœ‰ç»„</li>
<li>ç”¨æˆ·çš„é™„åŠ ç»„(supplementary group):ä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºé›¶ä¸ªæˆ–å¤šä¸ªè¾…åŠ©ç»„</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><pre><code class="hljs bash">[05:22:40 root@centos8 ~]<span class="hljs-comment">#id postfix</span><br>uid=89(postfix) gid=89(postfix) ç»„=89(postfix),12(mail)<br></code></pre></td></tr></table></figure>

<h4 id="7-1-4-å®‰å…¨ä¸Šä¸‹æ–‡"><a href="#7-1-4-å®‰å…¨ä¸Šä¸‹æ–‡" class="headerlink" title="7.1.4 å®‰å…¨ä¸Šä¸‹æ–‡"></a>7.1.4 å®‰å…¨ä¸Šä¸‹æ–‡</h4><ul>
<li><p>Linuxå®‰å…¨ä¸Šä¸‹æ–‡Context:è¿è¡Œä¸­çš„ç¨‹åºï¼Œå³è¿›ç¨‹(process)ï¼Œä»¥è¿›ç¨‹å‘èµ·è€…çš„èº«ä»½è¿è¡Œï¼Œè¿›ç¨‹æ‰€èƒ½å¤Ÿè®¿é—®èµ„æºçš„æƒé™å–å†³äºè¿›ç¨‹çš„è¿è¡Œè€…çš„èº«ä»½</p>
</li>
<li><p>æ¯”å¦‚: rootèº«ä»½è¿è¡Œ/bin/cat /etc/shadowå’Œyhçš„èº«ä»½è¿è¡Œ/bin/cat /etc/shadowï¼Œå¾—åˆ°çš„ç»“æœæ˜¯ä¸åŒçš„shadowèƒ½å¦èƒ½è¢«è®¿é—®æ˜¯ç”±è¿è¡Œè€…çš„èº«ä»½å†³å®šï¼Œéç¨‹åºæœ¬èº«</p>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">[05:27:10 root@centos8 ~]<span class="hljs-comment">#cat /etc/shadow</span><br>root:$6$YW6eWp5UdpNFxXP2<span class="hljs-variable">$WJ6AEr8nEF6HaVMKJOdmYFX3R4KMt6TY6J7HaYn4iWHejTvbyk684bGwNxDTwNY6GysvADLsM0XeTEMhkU3Pv0</span>::0:99999:7:::<br>bin:*:18397:0:99999:7:::<br>daemon:*:18397:0:99999:7:::<br>[05:28:10 yh@centos8 ~]<span class="hljs-comment">#cat /etc/shadow</span><br><span class="hljs-built_in">cat</span>: /etc/shadow: Permission denied<br></code></pre></td></tr></table></figure>

<h3 id="7-2-ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶"><a href="#7-2-ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶" class="headerlink" title="7.2 ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶"></a>7.2 ç”¨æˆ·å’Œç»„çš„é…ç½®æ–‡ä»¶</h3><h4 id="7-2-1-Linuxç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶"><a href="#7-2-1-Linuxç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶" class="headerlink" title="7.2.1 Linuxç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶"></a>7.2.1 Linuxç”¨æˆ·å’Œç»„çš„ä¸»è¦é…ç½®æ–‡ä»¶</h4><ul>
<li><p>/etc/passwd: ç”¨æˆ·åŠå…¶å±æ€§ä¿¡æ¯(åç§°ã€UIDã€ä¸»ç»„IDç­‰)</p>
</li>
<li><p>/etc/shadow: ç”¨æˆ·å¯†ç åŠå…¶ç›¸å…³å±æ€§</p>
</li>
<li><p>/etc/group: ç»„åŠå…¶å±æ€§ä¿¡æ¯</p>
</li>
<li><p>/etc/gshadow: ç»„å¯†ç åŠå…¶ç›¸å…³å±æ€§</p>
</li>
</ul>
<p>èŒƒä¾‹ï¼šUbuntuå¯ç”¨rootç™»å…¥ï¼Œå¹¶å¼€å¯sshè¿œç¨‹ç™»å…¥root</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">root@hao-virtual-machine:~<span class="hljs-comment"># vim /etc/shadow</span><br><span class="hljs-comment">#å–æ¶ˆrootåçš„å¹å· å³å¯æœ¬åœ°ç™»å…¥root</span><br>root@hao-virtual-machine:~<span class="hljs-comment"># vim /etc/ssh/sshd_config</span><br>ï¼ï¼ï¼<span class="hljs-comment">#PermitRootLig prohibit-password ä¿®æ”¹ä¸º PermitRootLogin yes</span><br><span class="hljs-comment">#ä¿®æ”¹åå³å¯è¿œç¨‹ç™»å…¥root</span><br></code></pre></td></tr></table></figure>

<h4 id="7-2-2-passwdæ–‡ä»¶æ ¼å¼"><a href="#7-2-2-passwdæ–‡ä»¶æ ¼å¼" class="headerlink" title="7.2.2 passwdæ–‡ä»¶æ ¼å¼"></a>7.2.2 passwdæ–‡ä»¶æ ¼å¼</h4><p>login nameï¼šç™»å…¥ç”¨å</p>
<p>passwdï¼šå¯†ç </p>
<p>UIDï¼šç”¨æˆ·èº«ä»½ç¼–å·</p>
<p>GIDï¼šç™»å½•é»˜è®¤æ‰€åœ¨ç»„ç¼–å·</p>
<p>GECOSï¼šç”¨æˆ·å…¨åæˆ–æ³¨é‡Š</p>
<p>home directoryï¼šç”¨æˆ·ä¸»ç›®å½•</p>
<p>shellï¼šç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„shell</p>
<h4 id="7-2-3-shadowæ–‡ä»¶æ ¼å¼"><a href="#7-2-3-shadowæ–‡ä»¶æ ¼å¼" class="headerlink" title="7.2.3 shadowæ–‡ä»¶æ ¼å¼"></a>7.2.3 shadowæ–‡ä»¶æ ¼å¼</h4><ul>
<li><p>ç™»å½•ç”¨å</p>
</li>
<li><p>ç”¨æˆ·å¯†ç :â€”èˆ¬ç”¨sha512åŠ å¯†</p>
</li>
<li><p>ä»1970å¹´1æœˆ1æ—¥èµ·åˆ°å¯†ç æœ€è¿‘ä¸€æ¬¡è¢«æ›´æ”¹çš„æ—¶é—´</p>
</li>
<li><p>å¯†ç å†è¿‡å‡ å¤©å¯ä»¥è¢«å˜æ›´(0è¡¨ç¤ºéšæ—¶å¯è¢«å˜æ›´)</p>
</li>
<li><p>å¯†ç å†è¿‡å‡ å¤©å¿…é¡»è¢«å˜æ›´(99999è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ)</p>
</li>
<li><p>å¯†ç è¿‡æœŸå‰å‡ å¤©ç³»ç»Ÿæé†’ç”¨æˆ·(é»˜è®¤ä¸ºä¸€å‘¨)</p>
</li>
<li><p>å¯†ç è¿‡æœŸå‡ å¤©åå¸å·ä¼šè¢«é”å®š</p>
</li>
<li><p>ä»1970å¹´1æœˆ1æ—¥ç®—èµ·ï¼Œå¤šå°‘å¤©åå¸å·å¤±æ•ˆ</p>
</li>
</ul>
<p>æ›´æ”¹å¯†ç åŠ å¯†ç®—æ³•</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">authconfig --passalgo=sha256 --update<br></code></pre></td></tr></table></figure>

<p>å¯†ç çš„å®‰å…¨ç­–ç•¥</p>
<ul>
<li>è¶³å¤Ÿé•¿</li>
<li>ä½¿ç”¨æ•°å­—ã€å¤§å†™å­—æ¯ã€å°å†™å­—æ¯åŠç‰¹æ®Šå­—ç¬¦ä¸­è‡³å°‘3ç§</li>
<li>ä½¿ç”¨éšæœºå¯†ç </li>
<li>å®šæœŸæ›´æ¢ï¼Œä¸è¦ä½¿ç”¨æœ€è¿‘æ›¾ç»ä½¿ç”¨è¿‡çš„å¯†ç </li>
</ul>
<h4 id="7-2-4-groupæ–‡ä»¶æ ¼å¼"><a href="#7-2-4-groupæ–‡ä»¶æ ¼å¼" class="headerlink" title="7.2.4 groupæ–‡ä»¶æ ¼å¼"></a>7.2.4 groupæ–‡ä»¶æ ¼å¼</h4><p>ç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤ç»„åç§°</p>
<p>ç¾¤ç»„å¯†ç ï¼šé€šå¸¸ä¸éœ€è¦è®¾å®šï¼Œå¯†ç æ˜¯è¢«è®°å½•åœ¨/etc/gshadow</p>
<p>GID:å°±æ˜¯ç¾¤ç»„çš„ID</p>
<p>ä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨(åˆ†éš”ç¬¦ä¸ºé€—å·)</p>
<h4 id="7-2-5-gshadowæ–‡ä»¶æ ¼å¼"><a href="#7-2-5-gshadowæ–‡ä»¶æ ¼å¼" class="headerlink" title="7.2.5 gshadowæ–‡ä»¶æ ¼å¼"></a>7.2.5 gshadowæ–‡ä»¶æ ¼å¼</h4><p>ç¾¤ç»„åç§°ï¼šå°±æ˜¯ç¾¤çš„åç§°</p>
<p>ç¾¤ç»„å¯†ç ï¼š</p>
<p>ç»„ç®¡ç†å‘˜åˆ—è¡¨ï¼šç»„ç®¡ç†å‘˜çš„åˆ—è¡¨ï¼Œæ›´æ”¹ç»„å¯†ç å’Œæˆå‘˜</p>
<p>ä»¥å½“å‰ç»„ä¸ºé™„åŠ ç»„çš„ç”¨æˆ·åˆ—è¡¨ï¼šå¤šä¸ªç”¨æˆ·é—´ç”¨é€—å·åˆ†éš”</p>
<h4 id="7-2-6-æ–‡ä»¶æ“ä½œ"><a href="#7-2-6-æ–‡ä»¶æ“ä½œ" class="headerlink" title="7.2.6 æ–‡ä»¶æ“ä½œ"></a>7.2.6 æ–‡ä»¶æ“ä½œ</h4><p>vipwå’Œvigr</p>
<p>pwckå’Œgrpck</p>
<h3 id="7-3-ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤"><a href="#7-3-ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤" class="headerlink" title="7.3 ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤"></a>7.3 ç”¨æˆ·å’Œç»„ç®¡ç†å‘½ä»¤</h3><p>ç”¨æˆ·ç®¡ç†å‘½ä»¤</p>
<ul>
<li>useradd</li>
<li>usermod</li>
<li>userdel</li>
</ul>
<p>ç»„è´¦å·ç»´æŠ¤å‘½ä»¤</p>
<ul>
<li>groupadd</li>
<li>groupmod</li>
<li>groupdel</li>
</ul>
<h4 id="7-3-1-ç”¨æˆ·åˆ›å»º"><a href="#7-3-1-ç”¨æˆ·åˆ›å»º" class="headerlink" title="7.3.1 ç”¨æˆ·åˆ›å»º"></a>7.3.1 ç”¨æˆ·åˆ›å»º</h4><p>useradd å‘½ä»¤å¯ä»¥åˆ›å»ºæ–°çš„Linuxç”¨æˆ·</p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">useradd [options] Login<br></code></pre></td></tr></table></figure>

<p>å¸¸è§é€‰é¡¹ï¼š</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-uï¼šUID</span><br><br><span class="hljs-deletion">-oï¼šé…åˆ-ué€‰é¡¹ï¼Œä¸æ£€æŸ¥UIDçš„å”¯ä¸€æ€§</span><br><br><span class="hljs-deletion">-gï¼šGID æŒ‡æ˜ç”¨æˆ·æ‰€å±åŸºæœ¬ç»„ï¼Œå¯ä¸ºç»„åï¼Œä¹Ÿå¯ä»¥GID</span><br><br><span class="hljs-deletion">-cï¼šâ€˜commentâ€™ ç”¨æˆ·çš„æ³¨é‡Šä¿¡æ¯</span><br><br><span class="hljs-deletion">-dï¼šHOME_DIR ä»¥æŒ‡å®šçš„è·¯å¾„ï¼ˆä¸å­˜åœ¨ï¼‰ä¸ºå®¶ç›®å½•</span><br><br><span class="hljs-deletion">-sï¼šSHELL æŒ‡æ˜ç”¨æˆ·çš„é»˜è®¤shellç¨‹åºï¼Œå¯ç”¨åˆ—è¡¨åœ¨/etc/shellsæ–‡ä»¶ä¸­</span><br><br><span class="hljs-deletion">-Gï¼šgroup1ï¼Œgroup2...   ä¸ºç”¨æˆ·æŒ‡æ˜é™„åŠ ç»„ï¼Œç»„é¡»äº‹å…ˆå­˜åœ¨</span><br><br><span class="hljs-deletion">-Nï¼šä¸åˆ›å»ºç§ç”¨ç»„åšä¸»ç»„ï¼Œä½¿ç”¨usersç»„åšä¸»ç»„</span><br><br><span class="hljs-deletion">-rï¼šåˆ›å»ºç³»ç»Ÿç”¨æˆ·CentOS6ä¹‹å‰ï¼šID&lt;500ï¼ŒCentOS7ä»¥åï¼šID&lt;1000</span><br><br><span class="hljs-deletion">-mï¼šåˆ›å»ºå®¶ç›®å½•ï¼Œç”¨äºç³»ç»Ÿç”¨æˆ·</span><br><br><span class="hljs-deletion">-Mï¼šä¸åˆ›å»ºå®¶ç›®å½•ï¼Œç”¨äºéç³»ç»Ÿç”¨æˆ·</span><br></code></pre></td></tr></table></figure>

<p>èŒƒä¾‹ï¼šåˆ›å»ºè´¦æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[03:07:33 root@c~]<span class="hljs-comment">#useradd -r -u 48 -s /sbin/nologin -d /var/www -c &quot;Apache&quot; apache</span><br></code></pre></td></tr></table></figure>

<p>useraddå‘½ä»¤é»˜è®¤å€¼è®¾å®šç”±/etc/default/useraddå®šä¹‰</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[07:40:51 root@centos8 ~]<span class="hljs-comment">#cat /etc/default/useradd</span><br><span class="hljs-comment"># useradd defaults file</span><br>GROUP=100<br>HOME=/home<br>INACTIVE=-1<br>EXPIRE=<br>SHELL=/bin/bash<br>SKEL=/etc/skel<br>CREATE_MAIL_SPOOL=<span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure>

<p>æ˜¾ç¤ºæˆ–æ›´æ”¹é»˜è®¤è®¾ç½®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">useradd -D<br>useradd -D -s SHELL<br>useradd -D -b BASE_DIR<br>useradd -D -g GROUP<br></code></pre></td></tr></table></figure>

<p>æ–°å»ºç”¨æˆ·çš„ç›¸å…³æ–‡ä»¶</p>
<ul>
<li>/etc/default/useradd    è§„åˆ™</li>
<li>/etc/skel/*                      å®¶ç›®å½•é‡Œé»˜è®¤ç”Ÿæˆçš„æ–‡ä»¶</li>
<li>/etc/login.defs               é»˜è®¤å¯†ç è§„åˆ™</li>
</ul>
<p>æ‰¹é‡åˆ›å»ºç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">newusers passwdæ ¼å¼æ–‡ä»¶<br></code></pre></td></tr></table></figure>

<p>æ‰¹é‡ä¿®æ”¹ç”¨æˆ·å£ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> username:passwd | chpasswd<br></code></pre></td></tr></table></figure>

<h4 id="7-3-2-ç”¨æˆ·å±æ€§ä¿®æ”¹"><a href="#7-3-2-ç”¨æˆ·å±æ€§ä¿®æ”¹" class="headerlink" title="7.3.2 ç”¨æˆ·å±æ€§ä¿®æ”¹"></a>7.3.2 ç”¨æˆ·å±æ€§ä¿®æ”¹</h4><p>usermodå‘½ä»¤å¯ä»¥ä¿®æ”¹ç”¨æˆ·å±æ€§</p>
<p>æ ¼å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">usermod [OPTION] login<br></code></pre></td></tr></table></figure>

<p>å¸¸è§é€‰é¡¹ï¼š</p>
<p>-u:UID:æ–°UID</p>
<p>-g:GID:æ–°ä¸»ç»„</p>
<p>-G:GROUP1[GROUP2.â€¦[GROUPNJ]:æ–°é™„åŠ ç»„ï¼ŒåŸæ¥çš„é™„åŠ ç»„å°†ä¼šè¢«è¦†ç›–;è‹¥ä¿ç•™åŸæœ‰ï¼Œåˆ™è¦åŒæ—¶ä½¿ç”¨-aé€‰é¡¹</p>
<p>-s:SHELL:æ–°çš„é»˜è®¤SHELL</p>
<p>-c:â€™COMMENTâ€™:æ–°çš„æ³¨é‡Šä¿¡æ¯</p>
<p>-d:HOME:æ–°å®¶ç›®å½•ä¸ä¼šè‡ªåŠ¨åˆ›å»º;è‹¥è¦åˆ›å»ºæ–°å®¶ç›®å½•å¹¶ç§»åŠ¨åŸå®¶æ•°æ®ï¼ŒåŒæ—¶ä½¿ç”¨-mé€‰é¡¹</p>
<p>-l:login_name:æ–°çš„åå­—</p>
<p>-L:lockæŒ‡å®šç”¨æˆ·,åœ¨/etcl/shadowå¯†ç æ çš„å¢åŠ !</p>
<p>-U:unlockæŒ‡å®šç”¨æˆ·,å°†/etc/shadowå¯†ç æ çš„!æ‹¿æ‰</p>
<p>-e:YYY-MM-DD:æŒ‡æ˜ç”¨æˆ·è´¦å·è¿‡æœŸæ—¥æœŸ</p>
<p>-f:INACTIVE:è®¾å®šéæ´»åŠ¨æœŸé™</p>
<h4 id="7-3-3-åˆ é™¤ç”¨æˆ·"><a href="#7-3-3-åˆ é™¤ç”¨æˆ·" class="headerlink" title="7.3.3 åˆ é™¤ç”¨æˆ·"></a>7.3.3 åˆ é™¤ç”¨æˆ·</h4><p>userdel å¯åˆ é™¤Linuxç”¨æˆ·</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">userdel [options]... Login<br></code></pre></td></tr></table></figure>

<p>å¸¸è§é€‰é¡¹ï¼š</p>
<p>-fï¼Œå¼ºåˆ¶</p>
<p>-rï¼Œåˆ é™¤ç”¨æˆ·å®¶ç›®å½•å’Œé‚®ç®±</p>
<h4 id="7-3-4-æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯"><a href="#7-3-4-æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯" class="headerlink" title="7.3.4 æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯"></a>7.3.4 æŸ¥çœ‹ç”¨æˆ·ç›¸å…³çš„IDä¿¡æ¯</h4><p>idå‘½ä»¤å¯ä»¥æŸ¥çœ‹ç”¨æˆ·çš„UIDï¼ŒGIDç­‰ä¿¡æ¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">id</span> [option]... [user]<br></code></pre></td></tr></table></figure>

<p>-u:æ˜¾ç¤ºUID</p>
<p>-g:æ˜¾ç¤ºGID</p>
<p>-G:æ˜¾ç¤ºç”¨æˆ·æ‰€å±çš„ç»„çš„ID</p>
<p>-n:æ˜¾ç¤ºåç§°ï¼Œéœ€é…åˆugGä½¿ç”¨</p>
<h4 id="7-3-5-åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤"><a href="#7-3-5-åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤" class="headerlink" title="7.3.5 åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤"></a>7.3.5 åˆ‡æ¢ç”¨æˆ·æˆ–ä»¥å…¶ä»–ç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤</h4><p>su å‘½ä»¤å¯ä»¥åˆ‡æ¢ç”¨æˆ·èº«ä»½ï¼Œå¹¶ä¸”ä»¥æŒ‡å®šç”¨æˆ·çš„èº«ä»½æ‰§è¡Œå‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su [options...] [-] [user [args...]]<br></code></pre></td></tr></table></figure>

<p>åˆ‡æ¢ç”¨æˆ·çš„æ–¹å¼ï¼š</p>
<ul>
<li>su usernameï¼šéç™»å…¥åˆ‡æ¢ï¼Œæ—¢ä¸ä¼šè¯»å–ç›®æ ‡ç”¨æˆ·é…ç½®æ–‡ä»¶ã€‚ä¸æ”¹å˜å½“å‰å·¥ä½œç›®å½•</li>
<li>su -usernameï¼šç™»å…¥åˆ‡æ¢ï¼Œä¼šè¯»å–ç›®æ ‡ç”¨æˆ·çš„é…ç½®æ–‡ä»¶ï¼Œåˆ‡æ¢è‡³å®¶ç›®å½•ï¼Œå®Œå…¨åˆ‡æ¢</li>
</ul>
<p>è¯´æ˜ï¼šroot suè‡³å…¶ä»–ç”¨æˆ·æ— éœ€å¯†ç ï¼›érootç”¨æˆ·åˆ‡æ¢æ—¶éœ€è¦å¯†ç </p>
<p>æ¢ä¸ªèº«ä»½æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su [-] username -c <span class="hljs-string">&#x27;command&#x27;</span><br></code></pre></td></tr></table></figure>

<p>:chestnut:åˆ‡æ¢åˆ°rootè´¦æˆ·æ‰§è¡Œgetent shadowåé€€å›åˆ°yh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[04:38:15 yh@centos8 ~]<span class="hljs-variable">$su</span> - root -c <span class="hljs-string">&quot;getent shadow&quot;</span><br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹ï¼š-l  â€“login su -l username ç›¸å½“äº su -username</p>
<h4 id="7-3-6-è®¾ç½®å¯†ç "><a href="#7-3-6-è®¾ç½®å¯†ç " class="headerlink" title="7.3.6 è®¾ç½®å¯†ç "></a>7.3.6 è®¾ç½®å¯†ç </h4><p>passwd å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">passwd [options...] username<br></code></pre></td></tr></table></figure>

<p>å¸¸ç”¨é€‰é¡¹ï¼š</p>
<p>-d:åˆ é™¤æŒ‡å®šç”¨æˆ·å¯†ç </p>
<p>-l:é”å®šæŒ‡å®šç”¨æˆ·</p>
<p>-u:è§£é”æŒ‡å®šç”¨æˆ·</p>
<p>-e:å¼ºåˆ¶ç”¨æˆ·ä¸‹æ¬¡ç™»å…¥ä¿®æ”¹å¯†ç </p>
<p>-f:å¼ºåˆ¶æ“ä½œ</p>
<p>-n:æŒ‡å®šæœ€çŸ­ä½¿ç”¨æœŸé™</p>
<p>-x:æœ€å¤§ä½¿ç”¨æœŸé™</p>
<p>-w:æå‰å¤šå°‘å¤©å¼€å§‹è­¦å‘Š</p>
<p>-i:éæ´»åŠ¨æœŸé™    </p>
<p>â€“stdin:ä»æ ‡å‡†è¾“å…¥æ¥å—ç”¨æˆ·å¯†ç </p>
<p>:chestnut:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;password&quot;</span> | passwd --stdin username<br></code></pre></td></tr></table></figure>

<h4 id="7-3-7-ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥"><a href="#7-3-7-ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥" class="headerlink" title="7.3.7 ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥"></a>7.3.7 ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥</h4><p>chage å¯ä»¥ä¿®æ”¹ç”¨æˆ·å¯†ç ç­–ç•¥</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chage [options...] login<br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹:</p>
<p>-d:last_day.    æœ€è¿‘ä¸€æ¬¡å¯†ç è®¾ç½®æ—¶é—´è®¾ä¸ºâ€œæœ€è¿‘æ—¥æœŸâ€</p>
<p>-m:â€“mindays min_days. æœ€å°å£ä»¤æœ‰æ•ˆæœŸ</p>
<p>-M:â€“maxdays mac_days.  æœ€å¤§å£ä»¤æœ‰æ•ˆæœŸã€‚</p>
<p>-W:â€“warndays warn_days å°†è¿‡æœŸè­¦å‘Šå¤©æ•°è®¾ä¸ºâ€œè­¦å‘Šå¤©æ•°â€</p>
<p>-I:â€“inactive inactive å¯†ç è¿‡æœŸåçš„å®½é™æœŸ</p>
<p>-E:â€“expiredate expire_date ç”¨æˆ·çš„æœ‰æ•ˆæœŸ</p>
<p>-:æŸ¥çœ‹ç”¨æˆ·å¯†ç è§„åˆ™</p>
<p>:chestnut:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">chage -d 0 tom <span class="hljs-comment">#ä¸‹ä¸€æ¬¡ç™»å…¥å¼ºåˆ¶é‡è®¾å¯†ç </span><br>[02:14:02 root@centos8 ~]<span class="hljs-comment">#chage -m 3 -M 42 -W 14 -I 7 -E 2099-12-12 yh</span><br>[02:14:43 root@centos8 ~]<span class="hljs-comment">#chage -l yh</span><br>æœ€è¿‘ä¸€æ¬¡å¯†ç ä¿®æ”¹æ—¶é—´					ï¼š11æœˆ 26, 2021<br>å¯†ç è¿‡æœŸæ—¶é—´					ï¼š1æœˆ 07, 2022<br>å¯†ç å¤±æ•ˆæ—¶é—´					ï¼š1æœˆ 14, 2022<br>å¸æˆ·è¿‡æœŸæ—¶é—´						ï¼š12æœˆ 12, 2099<br>ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å°å¤©æ•°		ï¼š3<br>ä¸¤æ¬¡æ”¹å˜å¯†ç ä¹‹é—´ç›¸è·çš„æœ€å¤§å¤©æ•°		ï¼š42<br>åœ¨å¯†ç è¿‡æœŸä¹‹å‰è­¦å‘Šçš„å¤©æ•°	ï¼š14<br></code></pre></td></tr></table></figure>

<h4 id="7-3-8-ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤"><a href="#7-3-8-ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤" class="headerlink" title="7.3.8 ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤"></a>7.3.8 ç”¨æˆ·ç›¸å…³çš„å…¶å®ƒå‘½ä»¤</h4><p>chfn æŒ‡å®šä¸ªäººä¿¡æ¯</p>
<p>chsh æŒ‡å®šshell</p>
<p>finger å¯çœ‹ç”¨æˆ·ä¸ªäººä¿¡æ¯</p>
<p>:chestnut:æ›´æ”¹shellç±»å‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">[02:34:19 root@centos8 ~]<span class="hljs-comment">#chsh -s /bin/sh yh</span><br>æ­£åœ¨æ›´æ”¹ yh çš„ shellã€‚<br>shell å·²æ›´æ”¹ã€‚<br>[02:34:40 root@centos8 ~]<span class="hljs-comment">#getent passwd yh</span><br>yh:x:1000:1000:Yh:/home/yh:/bin/sh<br>-----------------------------------------------------<br>[02:34:55 root@centos8 ~]<span class="hljs-comment">#usermod -s /bin/bash yh</span><br>[02:37:40 root@centos8 ~]<span class="hljs-comment">#getent passwd yh</span><br>yh:x:1000:1000:Yh:/home/yh:/bin/bash<br></code></pre></td></tr></table></figure>

<p>:chestnut:ä¿®æ”¹ç”¨æˆ·ä¸ºä¸å¯ç™»å…¥çš„shellç±»å‹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs bash">[07:44:34 root@centos8 ~]<span class="hljs-comment">#getent passwd yh</span><br>yh:x:1000:1000:Yh:/home/yh:/bin/bash<br>[07:44:55 root@centos8 ~]<span class="hljs-comment">#chsh -s /sbin/nologin yh</span><br>æ­£åœ¨æ›´æ”¹ yh çš„ shellã€‚<br>chsh: è­¦å‘Šï¼šâ€œ/sbin/nologinâ€æœªåœ¨ /etc/shells ä¸­åˆ—å‡ºã€‚<br>shell å·²æ›´æ”¹ã€‚<br>[07:45:13 root@centos8 ~]<span class="hljs-comment">#getent passwd yh</span><br>yh:x:1000:1000:Yh:/home/yh:/sbin/nologin<br>[07:45:21 root@centos8 ~]<span class="hljs-comment">#su - yh</span><br>This account is currently not available.<br>[07:45:41 root@centos8 ~]<span class="hljs-comment">#chsh -s /bin/false yh</span><br>æ­£åœ¨æ›´æ”¹ yh çš„ shellã€‚<br>chsh: è­¦å‘Šï¼šâ€œ/bin/falseâ€æœªåœ¨ /etc/shells ä¸­åˆ—å‡ºã€‚<br>shell å·²æ›´æ”¹ã€‚<br>[07:47:45 root@centos8 ~]<span class="hljs-comment">#getent passwd yh</span><br>yh:x:1000:1000:Yh:/home/yh:/bin/false<br>[07:48:02 root@centos8 ~]<span class="hljs-comment">#su - yh</span><br>[07:48:06 root@centos8 ~]<span class="hljs-comment">#</span><br>[07:48:06 root@centos8 ~]<span class="hljs-comment">#usermod -s /bin/bash yh</span><br>[07:48:50 root@centos8 ~]<span class="hljs-comment">#su - yh</span><br>[07:48:55 yh@centos8 ~]$<br></code></pre></td></tr></table></figure>



<h4 id="7-3-9-ç®¡ç†ç»„"><a href="#7-3-9-ç®¡ç†ç»„" class="headerlink" title="7.3.9 ç®¡ç†ç»„"></a>7.3.9 ç®¡ç†ç»„</h4><p><strong>åˆ›å»ºç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupadd [option...] groupname   <span class="hljs-comment">#åˆ›å»ºç»„</span><br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹:   -g:GIDå·     -r:åˆ›å»ºç³»ç»Ÿç»„</p>
<p>:chestnut:åˆ›å»ºGID48çš„ç³»ç»Ÿç»„apache</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupadd -g 48 -r apache<br></code></pre></td></tr></table></figure>

<p><strong>ä¿®æ”¹ç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupmod [option...] groupname    <span class="hljs-comment">#ä¿®æ”¹ç»„</span><br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹:   -n: æ–°åå­—     -g:æ–°çš„GID</p>
<p><strong>åˆ é™¤ç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupdel [option...] groupname     <span class="hljs-comment">#åˆ é™¤ç»„</span><br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹ï¼š-f å¼ºåˆ¶åˆ é™¤ï¼Œå³ä½¿æ˜¯ç”¨æˆ·çš„ä¸»ç»„ä¹Ÿå¼ºåˆ¶åˆ é™¤ç»„</p>
<p><strong>æ›´æ”¹ç»„å¯†ç </strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gpasswd [options...] groupname   <span class="hljs-comment">#æ›´æ”¹ç»„å¯†ç </span><br></code></pre></td></tr></table></figure>

<p>å¸¸è§é€‰é¡¹ï¼š-a user :å°†useræ·»åŠ è‡³æŒ‡å®šç»„ä¸­ï¼›-d user :ä»æŒ‡å®šç»„ä¸­ç§»é™¤ç”¨æˆ·userï¼›</p>
<p>-A user1ï¼Œuser2.è®¾ç½®æœ‰ç®¡ç†å‘˜æƒé™çš„ç”¨æˆ·åˆ—è¡¨ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">[03:06:20 root@centos8 ~]<span class="hljs-comment">#groupadd admin</span><br>[03:10:05 root@centos8 ~]<span class="hljs-comment">#id yh</span><br>uid=1000(yh) gid=1000(yh) ç»„=1000(yh),10(wheel)<br>[03:10:08 root@centos8 ~]<span class="hljs-comment">#gpasswd -a yh admin</span><br>æ­£åœ¨å°†ç”¨æˆ·â€œyhâ€åŠ å…¥åˆ°â€œadminâ€ç»„ä¸­<br>[03:10:24 root@centos8 ~]<span class="hljs-comment">#id yh</span><br>uid=1000(yh) gid=1000(yh) ç»„=1000(yh),10(wheel),1001(admin)<br>[03:10:26 root@centos8 ~]<span class="hljs-comment">#gpasswd -d yh admin</span><br>æ­£åœ¨å°†ç”¨æˆ·â€œyhâ€ä»â€œadminâ€ç»„ä¸­åˆ é™¤<br>[03:11:43 root@centos8 ~]<span class="hljs-comment">#id yh</span><br>uid=1000(yh) gid=1000(yh) ç»„=1000(yh),10(wheel)<br></code></pre></td></tr></table></figure>

<p><strong>ä¸´æ—¶åˆ‡æ¢ä¸»ç»„</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">newgrp [-] [group]    <span class="hljs-comment">#ä¸´æ—¶åˆ‡æ¢ä¸»ç»„</span><br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨-é€‰é¡¹ï¼Œå¯ä»¥åˆå§‹åŒ–ç”¨æˆ·ç¯å¢ƒ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">[03:00:34 yh@centos8 ~]<span class="hljs-variable">$id</span><br>uid=1000(yh) gid=1000(yh) ç»„=1000(yh),10(wheel)<br>[03:00:42 yh@centos8 ~]<span class="hljs-variable">$newgrp</span> root<br>å¯†ç ï¼š<br>newgrp: failed to crypt password with previous salt: æ— æ•ˆçš„å‚æ•°<br>[03:00:54 yh@centos8 ~]<span class="hljs-variable">$gpasswd</span> root<br>gpasswdï¼šæ²¡æœ‰æƒé™ã€‚<br>[03:01:05 yh@centos8 ~]<span class="hljs-variable">$sudo</span> gpasswd root<br>[sudo] yh çš„å¯†ç ï¼š<br>æ­£åœ¨ä¿®æ”¹ root ç»„çš„å¯†ç <br>æ–°å¯†ç ï¼š<br>è¯·é‡æ–°è¾“å…¥æ–°å¯†ç ï¼š<br>[03:01:26 yh@centos8 ~]<span class="hljs-variable">$newgrp</span> root<br>å¯†ç ï¼š<br>[03:01:37 yh@centos8 ~]<span class="hljs-variable">$id</span><br>uid=1000(yh) gid=0(root) ç»„=0(root),10(wheel),1000(yh)<br>[03:01:40 yh@centos8 ~]<span class="hljs-variable">$touch</span> <span class="hljs-built_in">test</span><br>[03:03:08 yh@centos8 ~]<span class="hljs-variable">$ll</span><br>-rw-r--r--  1 yh root 0 12æœˆ  2 15:03 <span class="hljs-built_in">test</span><br>[03:03:09 yh@centos8 ~]<span class="hljs-variable">$exit</span><br><span class="hljs-built_in">exit</span><br>[03:03:19 yh@centos8 ~]<span class="hljs-variable">$id</span><br>uid=1000(yh) gid=1000(yh) ç»„=1000(yh),10(wheel)<br>[03:03:22 yh@centos8 ~]<span class="hljs-variable">$touch</span> test1<br>[03:03:29 yh@centos8 ~]<span class="hljs-variable">$ll</span><br>-rw-r--r--  1 yh root 0 12æœˆ  2 15:03 <span class="hljs-built_in">test</span><br>-rw-rw-r--  1 yh yh   0 12æœˆ  2 15:03 test1<br></code></pre></td></tr></table></figure>

<p><strong>æ›´æ”¹å’ŒæŸ¥çœ‹ç»„æˆå‘˜</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">groupmems [options..] [actionåŠ¨ä½œ]<br></code></pre></td></tr></table></figure>

<p>é€‰é¡¹ï¼š<br>  -g, â€“group groupname         æ›´æ”¹ç»„ groupnameï¼Œè€Œä¸æ˜¯ç”¨æˆ·çš„ç»„(åª root)<br>  -R, â€“root CHROOT_DIR         chroot åˆ°çš„ç›®å½•</p>
<p>åŠ¨ä½œï¼š<br>  -a, â€“add username            å°†ç”¨æˆ· username æ·»åŠ åˆ°ç»„æˆå‘˜ä¸­<br>  -d, â€“delete username         ä»ç»„çš„æˆå‘˜ä¸­åˆ é™¤ç”¨æˆ· username<br>  -h, â€“help                    æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶æ¨å‡º<br>  -p, â€“purge                   ä»ç»„ä¸­ç§»é™¤æ‰€æœ‰æˆå‘˜<br>  -l, â€“list                    åˆ—å‡ºç»„ä¸­çš„æ‰€æœ‰æˆå‘˜</p>
<h3 id="7-4-æ–‡ä»¶ç®¡ç†æƒé™"><a href="#7-4-æ–‡ä»¶ç®¡ç†æƒé™" class="headerlink" title="7.4 æ–‡ä»¶ç®¡ç†æƒé™"></a>7.4 æ–‡ä»¶ç®¡ç†æƒé™</h3><h4 id="7-4-1-æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ"><a href="#7-4-1-æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ" class="headerlink" title="7.4.1 æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ"></a>7.4.1 æ–‡ä»¶æ‰€æœ‰è€…å’Œå±ç»„å±æ€§æ“ä½œ</h4><h5 id="7-4-1-1-è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown"><a href="#7-4-1-1-è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown" class="headerlink" title="7.4.1.1 è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown"></a>7.4.1.1 è®¾ç½®æ–‡ä»¶çš„æ‰€æœ‰è€…chown</h5><p>chownå‘½ä»¤å¯ä»¥ä¿®æ”¹æ–‡ä»¶çš„å±ä¸»ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–‡ä»¶å±ç»„</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">ç”¨æ³•ï¼š<span class="hljs-built_in">chown</span> [é€‰é¡¹]... [æ‰€æœ‰è€…] [:[ç»„]] æ–‡ä»¶...<br>ã€€æˆ–ï¼š<span class="hljs-built_in">chown</span> [é€‰é¡¹]... --reference=å‚è€ƒæ–‡ä»¶ æ–‡ä»¶...<br></code></pre></td></tr></table></figure>

<p>:chestnut:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs bash">[09:03:17 root@centos8 ~]<span class="hljs-comment">#touch test              #æ›´æ”¹testæ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¸ºyh</span><br>[09:09:26 root@centos8 ~]<span class="hljs-comment">#ll test</span><br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:09 <span class="hljs-built_in">test</span><br>[09:09:29 root@centos8 ~]<span class="hljs-comment">#chown yh:yh test</span><br>[09:09:45 root@centos8 ~]<span class="hljs-comment">#ll test</span><br>-rw-r--r-- 1 yh yh 0 12æœˆ  2 21:09 <span class="hljs-built_in">test</span><br>--------------------------------------------<br>[09:33:44 root@centos8 ~]<span class="hljs-comment">#ll test1                 #æ›´æ”¹test1æ–‡ä»¶çš„æ‰€å±ç»„ä¸ºyh</span><br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:24 test1<br>[09:33:46 root@centos8 ~]<span class="hljs-comment">#chown :yh test1</span><br>[09:33:55 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw-r--r-- 1 root yh 0 12æœˆ  2 21:24 test1<br>--------------------------------------------<br>[09:24:36 root@centos8 ~]<span class="hljs-comment">#ll test1 test2         #å‚è€ƒtest2çš„æ‰€æœ‰è€…å’Œæ‰€å±ç»„æ¥ä¿®æ”¹test1</span><br>-rw-r--r-- 1 yh   yh   0 12æœˆ  2 21:24 test1<br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:24 test2<br>[09:24:41 root@centos8 ~]<span class="hljs-comment">#chown --reference=test2 test1</span><br>[09:25:02 root@centos8 ~]<span class="hljs-comment">#ll test1 test2</span><br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:24 test1<br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:24 test2<br></code></pre></td></tr></table></figure>

<h4 id="7-4-2-æ–‡ä»¶æƒé™"><a href="#7-4-2-æ–‡ä»¶æƒé™" class="headerlink" title="7.4.2 æ–‡ä»¶æƒé™"></a>7.4.2 æ–‡ä»¶æƒé™</h4><h5 id="7-4-2-1-æ–‡ä»¶æƒé™è¯´æ˜"><a href="#7-4-2-1-æ–‡ä»¶æƒé™è¯´æ˜" class="headerlink" title="7.4.2.1 æ–‡ä»¶æƒé™è¯´æ˜"></a>7.4.2.1 æ–‡ä»¶æƒé™è¯´æ˜</h5><p><strong>æ–‡ä»¶çš„æƒé™ä¸»è¦é’ˆå¯¹ä¸‰ç±»å¯¹è±¡è¿›è¡Œå®šä¹‰</strong></p>
<ul>
<li><p>owner å±ä¸» u</p>
</li>
<li><p>group  å±ç»„ g</p>
</li>
<li><p>other   å…¶ä»– o</p>
</li>
</ul>
<p><strong>æ¯ä¸ªæ–‡ä»¶é’ˆå¯¹æ¯ç±»è®¿é—®è€…éƒ½å®šä¹‰äº†ä¸‰ç§æƒé™</strong></p>
<ul>
<li><p>r   readable</p>
</li>
<li><p>w  writable</p>
</li>
<li><p>x  excutable</p>
</li>
</ul>
<p><strong>å¯¹æ–‡ä»¶çš„æƒé™</strong></p>
<ul>
<li><p>r   å¯ä½¿ç”¨æ–‡ä»¶æŸ¥çœ‹ç±»å·¥å…·è·å–å…¶å†…å®¹</p>
</li>
<li><p>w  å¯ä¿®æ”¹å…¶å†…å®¹</p>
</li>
<li><p>x   å¯ä»¥æŠŠæ­¤æ–‡ä»¶æè¯·å†…æ ¸å¯åŠ¨ä¸ºä¸€ ä¸ªè¿›ç¨‹</p>
</li>
</ul>
<p><strong>å¯¹ç›®å½•çš„æƒé™</strong></p>
<ul>
<li>r  å¯ä»¥ä½¿ç”¨IsæŸ¥çœ‹æ­¤ç›®å½•ä¸­æ–‡ä»¶åˆ—è¡¨</li>
<li>w å¯åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºæ–‡ä»¶ï¼Œ ä¹Ÿå¯åˆ é™¤æ­¤ç›®å½•ä¸­çš„æ–‡ä»¶</li>
<li>x  å¯ä»¥ä½¿ç”¨ls -IæŸ¥çœ‹æ­¤ç›®å½•ä¸­æ–‡ä»¶å…ƒæ•°æ®(é¡»é…åˆr) ï¼Œå¯ä»¥cdè¿›å…¥æ­¤ç›®å½•</li>
<li>X  åªç»™ç›®å½•xæƒé™ï¼Œä¸ç»™æ— æ‰§è¡Œæƒé™çš„æ–‡ä»¶xæƒé™</li>
</ul>
<p>![æˆªå±2021-12-03 ä¸‹åˆ12.59.52](../../../Documents/Typroa-LinuxåŸºç¡€å…¥é—¨-photo/æˆªå±2021-12-03 ä¸‹åˆ12.59.52.png)</p>
<p>å…«è¿›åˆ¶æ•°å­—</p>
<p>â€” 000     0</p>
<p>â€“x 001    1</p>
<p>-w- 010   2</p>
<p>-wx 011  3</p>
<p>râ€“ 100    4</p>
<p>r-x 101    5</p>
<p>rw- 110   6</p>
<p>rwx 111  7</p>
<p>ğŸŒ°</p>
<p>640  rw-râ€”â€“</p>
<p>755  rwxr-xr-x</p>
<p>é¢è¯•é¢˜</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">æ‰§è¡Œ <span class="hljs-built_in">cp</span> /etc/issue /data/dir/ æ‰€éœ€çš„æœ€å°æƒé™<br>/bin/cp    x<br>/etc       x<br>/etc/issue r<br>/data      x<br>/data/dir  w x<br></code></pre></td></tr></table></figure>

<h5 id="7-4-2-2-ä¿®æ”¹æ–‡ä»¶æƒé™chmod"><a href="#7-4-2-2-ä¿®æ”¹æ–‡ä»¶æƒé™chmod" class="headerlink" title="7.4.2.2 ä¿®æ”¹æ–‡ä»¶æƒé™chmod"></a>7.4.2.2 ä¿®æ”¹æ–‡ä»¶æƒé™chmod</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ç”¨æ³•ï¼š<span class="hljs-built_in">chmod</span> [é€‰é¡¹]... æ¨¡å¼[,æ¨¡å¼]... æ–‡ä»¶...<br>ã€€æˆ–ï¼š<span class="hljs-built_in">chmod</span> [é€‰é¡¹]... å…«è¿›åˆ¶æ¨¡å¼ æ–‡ä»¶...<br>ã€€æˆ–ï¼š<span class="hljs-built_in">chmod</span> [é€‰é¡¹]... --reference=å‚è€ƒæ–‡ä»¶ æ–‡ä»¶...<br></code></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<p>-Rï¼šé€’å½’ä¿®æ”¹æƒé™</p>
<p>ä¿®æ”¹ä¸€ç±»ç”¨æˆ·çš„æ‰€æœ‰æƒé™</p>
<p>u= ;g= ;o= ;ug= ;a= ;ã€€</p>
<p>ä¿®æ”¹ä¸€ç±»ç”¨æˆ·æŸä½æˆ–æŸäº›ä½æƒé™</p>
<p>u+ ;u- ;g+ ;o- ;a+ ;</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash">[10:12:46 root@centos8 ~]<span class="hljs-comment">#ll test1 test2</span><br>-rw-r--r-- 1 root yh   0 12æœˆ  2 21:24 test1<br>-rw-r--r-- 1 root root 0 12æœˆ  2 21:24 test2<br>[10:13:42 root@centos8 ~]<span class="hljs-comment">#chmod ug= test1</span><br>[10:14:03 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-------r-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[10:14:06 root@centos8 ~]<span class="hljs-comment">#chmod a= test1</span><br>[10:14:20 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>---------- 1 root yh 0 12æœˆ  2 21:24 test1<br>[10:14:22 root@centos8 ~]<span class="hljs-comment">#chmod a+r test1</span><br>[10:15:28 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-r--r--r-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[10:15:29 root@centos8 ~]<span class="hljs-comment">#chmod u+w,g+x test1</span><br>[10:16:08 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw-r-xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[10:16:11 root@centos8 ~]<span class="hljs-comment">#chmod g-r test1</span><br>[10:16:45 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br></code></pre></td></tr></table></figure>

<h4 id="7-4-3-æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™"><a href="#7-4-3-æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™" class="headerlink" title="7.4.3 æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™"></a>7.4.3 æ–°å»ºæ–‡ä»¶å’Œç›®å½•çš„é»˜è®¤æƒé™</h4><p>umaskçš„å€¼å¯ä»¥ç”¨æ¥ä¿ç•™åœ¨åˆ›å»ºæ–‡ä»¶æƒé™</p>
<p>å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>æ–°å»ºæ–‡ä»¶çš„é»˜è®¤æƒé™ï¼š666-umaskï¼Œå¦‚æœæ‰€å¾—ç»“æœæŸä½å­˜åœ¨æ‰§è¡Œ(å¥‡æ•°)ï¼Œåˆ™å°†å…¶æƒé™+1</li>
<li>æ–°å»ºç›®å½•çš„é»˜è®¤æƒé™ï¼š777-umask</li>
</ul>
<p>éç‰¹æƒç”¨æˆ·umaské»˜è®¤æ˜¯002</p>
<p>rootçš„umaské»˜è®¤æ˜¯022</p>
<p>æŸ¥çœ‹umask</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">umask</span> <br><span class="hljs-comment">#æ¨¡å¼æ–¹å¼æ˜¾ç¤º</span><br><span class="hljs-built_in">umask</span> -S <br><span class="hljs-comment">#è¾“å‡ºå¯è¢«è°ƒç”¨</span><br><span class="hljs-built_in">umask</span> -p<br></code></pre></td></tr></table></figure>

<p>ä¿®æ”¹umask</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">umask</span> <span class="hljs-comment">#</span><br><span class="hljs-built_in">umask</span> 002<br><span class="hljs-built_in">umask</span> u=rw,g=r,0=<br></code></pre></td></tr></table></figure>

<p>æŒä¹…ä¿å­˜umask</p>
<ul>
<li>å…¨å±€è®¾ç½®ï¼š/etc/bashrc</li>
<li>ç”¨æˆ·è®¾ç½®ï¼š~/.bashrc</li>
</ul>
<h4 id="7-4-4-Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™"><a href="#7-4-4-Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™" class="headerlink" title="7.4.4 Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™"></a>7.4.4 Linuxæ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‰¹æ®Šæƒé™</h4><p>å‰é¢ä»‹ç»äº†ä¸‰ç§å¸¸è§çš„æƒé™:r,w,xã€‚è¿˜æœ‰ä¸‰ç§ç‰¹æ®Šæƒé™ï¼šSUIDï¼ŒSGIDï¼ŒSticky</p>
<h5 id="7-4-4-1-ç‰¹æ®Šæƒé™SUID"><a href="#7-4-4-1-ç‰¹æ®Šæƒé™SUID" class="headerlink" title="7.4.4.1 ç‰¹æ®Šæƒé™SUID"></a>7.4.4.1 ç‰¹æ®Šæƒé™SUID</h5><p>å®‰å…¨ä¸Šä¸‹æ–‡</p>
<p>å‰æï¼š è¿›ç¨‹æœ‰å±ä¸»å’Œå±ç»„ã€‚ æ–‡ä»¶æœ‰å±ä¸»å’Œå±ç»„ã€‚</p>
<ol>
<li><p>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹ï¼Œ å–å†³äºå‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™ã€‚</p>
</li>
<li><p>å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºå‘èµ·è€…ï¼Œè¿›ç¨‹çš„å±ç»„å‘èµ·è€…æ‰€å±çš„ç»„ã€‚</p>
</li>
<li><p>è¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶çš„æƒé™ï¼Œå–å†³äºè¿›ç¨‹çš„å‘èµ·è€…ã€‚</p>
<p>(a)è¿›ç¨‹çš„å‘èµ·è€…ï¼ŒåŒæ–‡ä»¶çš„å±ä¸»ï¼Œåˆ™åº”ç”¨æ–‡ä»¶å±ä¸»æƒé™</p>
<p>(b)è¿›ç¨‹çš„å‘èµ·è€…ï¼Œå±äºæ–‡ä»¶å±ç»„ï¼›åˆ™åº”ç”¨æ–‡ä»¶å±ç»„æƒé™</p>
<p>(c)åº”ç”¨æ–‡ä»¶â€œå…¶å®ƒâ€æƒé™</p>
</li>
</ol>
<p>äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSUIDæƒé™åŠŸèƒ½ï¼š</p>
<ul>
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹:å–å†³å‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹ä¹‹åï¼Œå…¶è¿›ç¨‹çš„å±ä¸»ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ä¸»</li>
<li>SUIDåªå¯¹äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆ</li>
<li>SUIDè®¾ç½®åœ¨ç›®å½•ä¸Šæ— æ„ä¹‰</li>
</ul>
<h5 id="7-4-4-2-ç‰¹æ®Šæƒé™SGID"><a href="#7-4-4-2-ç‰¹æ®Šæƒé™SGID" class="headerlink" title="7.4.4.2 ç‰¹æ®Šæƒé™SGID"></a>7.4.4.2 ç‰¹æ®Šæƒé™SGID</h5><p>äºŒè¿›åˆ¶çš„å¯æ‰§è¡Œæ–‡ä»¶ä¸ŠSGIDæƒé™åŠŸèƒ½</p>
<ul>
<li>ä»»ä½•ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶èƒ½ä¸èƒ½å¯åŠ¨ä¸ºè¿›ç¨‹å–å†³äºå‘èµ·è€…å¯¹ç¨‹åºæ–‡ä»¶æ˜¯å¦æ‹¥æœ‰æ‰§è¡Œæƒé™</li>
<li>å¯åŠ¨ä¸ºè¿›ç¨‹åï¼Œå…¶è¿›ç¨‹çš„å±ç»„ä¸ºåŸç¨‹åºæ–‡ä»¶çš„å±ç»„</li>
</ul>
<p>SGIDæƒé™è®¾å®š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> g+s file...<br><span class="hljs-built_in">chmod</span> 2xxx file...<br><span class="hljs-built_in">chmod</span> g-s file...<br></code></pre></td></tr></table></figure>

<p>ç›®å½•ä¸Šçš„SGIDæƒé™åŠŸèƒ½</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œç”¨æˆ·åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œå…¶å±ç»„ä¸ºæ­¤ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¸€æ—¦æŸç›®å½•è¢«è®¾å®šäº†SGIDï¼Œåˆ™å¯¹æ­¤ç›®å½•æœ‰å†™æƒé™çš„ç”¨æˆ·åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºçš„æ–‡ä»¶æ‰€å±çš„ç»„ä¸ºæ­¤ç›®å½•çš„å±ç»„ï¼Œé€šå¸¸ç”¨äºåˆ›å»ºä¸€ä¸ªåä½œç›®å½•ã€‚</p>
<p>SGIDæƒé™è®¾å®š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> g+s <span class="hljs-built_in">dir</span>...<br><span class="hljs-built_in">chmod</span> 2xxx <span class="hljs-built_in">dir</span>...<br><span class="hljs-built_in">chmod</span> g-s <span class="hljs-built_in">dir</span>...<br></code></pre></td></tr></table></figure>

<h5 id="7-4-4-3-ç‰¹æ®Šæƒé™stickyä½"><a href="#7-4-4-3-ç‰¹æ®Šæƒé™stickyä½" class="headerlink" title="7.4.4.3 ç‰¹æ®Šæƒé™stickyä½"></a>7.4.4.3 ç‰¹æ®Šæƒé™stickyä½</h5><p>å…·æœ‰å†™æƒé™çš„ç›®å½•é€šå¸¸ç”¨æˆ·å¯ä»¥åˆ é™¤è¯¥ç›®å½•ä¸­çš„ä»»ä½•æ–‡ä»¶,æ— è®ºè¯¥æ–‡ä»¶çš„æƒé™æˆ–æ‹¥æœ‰æƒåœ¨ç›®å½•è®¾ç½®Stickyä½,åªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–rootå¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶stickyè®¾ç½®åœ¨æ–‡ä»¶.ä¸Šæ— æ„ä¹‰</p>
<p>Stickyæƒé™è®¾å®šï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> o+t <span class="hljs-built_in">dir</span>...<br><span class="hljs-built_in">chmod</span> 1xxx <span class="hljs-built_in">dir</span>...<br><span class="hljs-built_in">chmod</span> o-t <span class="hljs-built_in">dir</span>...<br></code></pre></td></tr></table></figure>

<h5 id="7-4-4-5-ç‰¹æ®Šæƒé™å­—æ³•"><a href="#7-4-4-5-ç‰¹æ®Šæƒé™å­—æ³•" class="headerlink" title="7.4.4.5 ç‰¹æ®Šæƒé™å­—æ³•"></a>7.4.4.5 ç‰¹æ®Šæƒé™å­—æ³•</h5><p>SUID SGID Sticky</p>
<p>000 0</p>
<p>001 1</p>
<p>010 2</p>
<p>011 3</p>
<p>100 4</p>
<p>101 5</p>
<p>110 6</p>
<p>111 7</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">[09:55:38 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[09:55:43 root@centos8 ~]<span class="hljs-comment">#chmod 4614 test1</span><br>[09:56:18 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rwS--xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>--------------------------------------------------<br>[09:55:38 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[09:55:43 root@centos8 ~]<span class="hljs-comment">#chmod 2614 test1</span><br>[09:56:18 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---sr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>--------------------------------------------------<br>[09:55:38 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---xr-- 1 root yh 0 12æœˆ  2 21:24 test1<br>[09:55:43 root@centos8 ~]<span class="hljs-comment">#chmod 1614 test1</span><br>[09:56:18 root@centos8 ~]<span class="hljs-comment">#ll test1</span><br>-rw---xr-S 1 root yh 0 12æœˆ  2 21:24 test1<br></code></pre></td></tr></table></figure>

<p>æƒé™ä½æ˜ å°„</p>
<p>SUIDï¼šuserï¼Œå æ®å±ä¸»çš„æ‰§è¡Œæƒé™ä½</p>
<p>â€‹        sï¼šå±ä¸»æ‹¥æœ‰xæƒé™</p>
<p>â€‹        Sï¼šå±ä¸»æ²¡æœ‰xæƒé™</p>
<p>SGIDï¼šgroupï¼Œå æ®å±ç»„çš„æ‰§è¡Œæƒé™ä½</p>
<p>â€‹        sï¼šgroupæ‹¥æœ‰xæƒé™</p>
<p>â€‹        Sï¼šgroupæ²¡æœ‰xæƒé™</p>
<p>Stickyï¼šotherï¼Œå æ®otherçš„æ‰§è¡Œæƒé™ä½</p>
<p>â€‹        tï¼šotheræ‹¥æœ‰xæƒé™</p>
<p>â€‹        Tï¼šotheræ²¡æœ‰xæƒé™</p>
<h4 id="7-4-5-è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§"><a href="#7-4-5-è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§" class="headerlink" title="7.4.5 è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§"></a>7.4.5 è®¾å®šæ–‡ä»¶ç‰¹æ®Šå±æ€§</h4><p>è®¾ç½®æ–‡ä»¶çš„ç‰¹æ®Šå±æ€§ï¼Œé˜²æ­¢å¯ä»¥è®¿é—®rootç”¨æˆ·è¯¯æ“ä½œåˆ é™¤æˆ–ä¿®æ”¹æ–‡ä»¶</p>
<p>ä¸èƒ½åˆ é™¤ï¼Œæ”¹åï¼Œæ›´æ”¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chattr +i<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash">[10:17:38 root@centos8 ~]<span class="hljs-comment">#lsattr t1 t2</span><br>-------------------- t1<br>-------------------- t2<br>[10:17:45 root@centos8 ~]<span class="hljs-comment">#chattr +i t1</span><br>[10:18:02 root@centos8 ~]<span class="hljs-comment">#lsattr t1 t2</span><br>----i--------------- t1<br>-------------------- t2<br>[10:18:07 root@centos8 ~]<span class="hljs-comment">#rm -f t1</span><br><span class="hljs-built_in">rm</span>: æ— æ³•åˆ é™¤<span class="hljs-string">&#x27;t1&#x27;</span>: ä¸å…è®¸çš„æ“ä½œ<br>[10:18:48 root@centos8 ~]<span class="hljs-comment">#echo hellow &gt;&gt; t1</span><br>-bash: t1: ä¸å…è®¸çš„æ“ä½œ<br>[10:18:59 root@centos8 ~]<span class="hljs-comment">#mv t1 test1</span><br><span class="hljs-built_in">mv</span>: æ— æ³•å°†<span class="hljs-string">&#x27;t1&#x27;</span> ç§»åŠ¨è‡³<span class="hljs-string">&#x27;test1&#x27;</span>: ä¸å…è®¸çš„æ“ä½œ<br></code></pre></td></tr></table></figure>

<p>åªèƒ½è¿½åŠ å†…å®¹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">chattr +a<br></code></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[10:21:11 root@centos8 ~]<span class="hljs-comment">#chattr +a t1</span><br>[10:21:17 root@centos8 ~]<span class="hljs-comment">#lsattr t1</span><br>-----a-------------- t1<br>[10:21:24 root@centos8 ~]<span class="hljs-comment">#mv t1 /t1</span><br><span class="hljs-built_in">mv</span>: æ— æ³•å°†<span class="hljs-string">&#x27;t1&#x27;</span> ç§»åŠ¨è‡³<span class="hljs-string">&#x27;/t1&#x27;</span>: ä¸å…è®¸çš„æ“ä½œ<br>[10:24:38 root@centos8 ~]<span class="hljs-comment">#rm -f t1</span><br><span class="hljs-built_in">rm</span>: æ— æ³•åˆ é™¤<span class="hljs-string">&#x27;t1&#x27;</span>: ä¸å…è®¸çš„æ“ä½œ<br>[10:25:12 root@centos8 ~]<span class="hljs-comment">#echo hello world &gt; t1</span><br>-bash: t1: ä¸å…è®¸çš„æ“ä½œ<br>[10:27:09 root@centos8 ~]<span class="hljs-comment">#echo hello world &gt;&gt; t1</span><br>[10:27:23 root@centos8 ~]<span class="hljs-comment">#cat t1</span><br>hello world<br></code></pre></td></tr></table></figure>

<p>æ˜¾ç¤ºç‰¹å®šå±æ€§</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsattr<br></code></pre></td></tr></table></figure>

<h4 id="7-4-6-è®¿é—®æ§åˆ¶åˆ—è¡¨"><a href="#7-4-6-è®¿é—®æ§åˆ¶åˆ—è¡¨" class="headerlink" title="7.4.6 è®¿é—®æ§åˆ¶åˆ—è¡¨"></a>7.4.6 è®¿é—®æ§åˆ¶åˆ—è¡¨</h4><h5 id="7-4-6-1-ACLæƒé™åŠŸèƒ½"><a href="#7-4-6-1-ACLæƒé™åŠŸèƒ½" class="headerlink" title="7.4.6.1 ACLæƒé™åŠŸèƒ½"></a>7.4.6.1 ACLæƒé™åŠŸèƒ½</h5><p>ACL: Access Control Listï¼Œå®ç°çµæ´»çš„æƒé™ç®¡ç†</p>
<p>é™¤äº†æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œæ‰€å±ç»„å’Œå…¶å®ƒäººï¼Œå¯ä»¥å¯¹æ›´å¤šçš„ç”¨æˆ·è®¾ç½®æƒé™</p>
<p>CentOS7 é»˜è®¤åˆ›å»ºçš„xfså’Œext4æ–‡ä»¶ç³»ç»Ÿå…·æœ‰ACLåŠŸèƒ½</p>
<p>CentOS7ä¹‹å‰ç‰ˆæœ¬ï¼Œé»˜è®¤æ‰‹å·¥åˆ›å»ºçš„ext4æ–‡ä»¶ç³»ç»Ÿæ— ACLåŠŸèƒ½,éœ€æ‰‹åŠ¨å¢åŠ </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">tune2fs -o acl /dev/sdb1<br>mount -o acl /dev/sdb1 /mnt/test<br></code></pre></td></tr></table></figure>

<p>ACLç”Ÿæ•ˆé¡ºåº:</p>
<p>æ‰€æœ‰è€…,è‡ªå®šä¹‰ç”¨æˆ·,æ‰€å±ç»„|è‡ªå®šä¹‰ç»„,å…¶ä»–äºº</p>
<h5 id="7-4-6-2-ACLç›¸å…³å‘½ä»¤"><a href="#7-4-6-2-ACLç›¸å…³å‘½ä»¤" class="headerlink" title="7.4.6.2 ACLç›¸å…³å‘½ä»¤"></a>7.4.6.2 ACLç›¸å…³å‘½ä»¤</h5><p>setfaclå¯ä»¥è®¾ç½®ACLæƒé™</p>
<p>é€‰é¡¹: -m:ä¿®æ”¹æ–‡ä»¶çš„å½“å‰ACL</p>
<p>â€‹          -x :ä»æ–‡ä»¶çš„ACLä¸­åˆ é™¤æ¡ç›®</p>
<p>getfaclå¯æŸ¥çœ‹è®¾ç½®çš„ACLæƒé™</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash">05:38:12 root@centos8 ~]<span class="hljs-comment">#setfacl -m u:yh:- t2</span><br>[05:38:26 root@centos8 ~]<span class="hljs-comment">#getfacl t2</span><br><span class="hljs-comment"># file: t2</span><br><span class="hljs-comment"># owner: root</span><br><span class="hljs-comment"># group: root</span><br>user::rw-<br>user:yh:---<br>group::r--<br>mask::r--<br>other::r--<br>[05:40:57 yh@centos8 root]<span class="hljs-variable">$cat</span> t2<br><span class="hljs-built_in">cat</span>: t2: æƒé™ä¸å¤Ÿ<br>[05:42:48 root@centos8 ~]<span class="hljs-comment">#setfacl -m u:yh:rw t2</span><br>[05:43:20 yh@centos8 ~]<span class="hljs-variable">$cat</span> /root/t2<br>[05:43:27 yh@centos8 ~]<span class="hljs-variable">$echo</span> hellow &gt;&gt; /root/t2<br>[05:43:44 yh@centos8 ~]<span class="hljs-variable">$cat</span> /root/t2<br>hellow<br></code></pre></td></tr></table></figure>

<p>æ¸…é™¤æ‰€æœ‰ACLæƒé™: setfacl -b filename</p>
<p><strong>å¤‡ä»½å’Œè¿˜åŸACL</strong></p>
<p>ä¸»è¦çš„æ–‡ä»¶æ“ä½œå‘½ä»¤cpå’Œmvéƒ½æ”¯æŒACL,åªæ˜¯cpå‘½ä»¤éœ€è¦åŠ ä¸Š-på‚æ•°.ä½†æ˜¯tarç­‰å¸¸è§çš„å¤‡ä»½å·¥å…·æ˜¯ä¸ä¼šä¿ç•™ç›®å½•å’Œæ–‡ä»¶çš„ACLä¿¡æ¯.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#å¤‡ä»½ACL</span><br>getfacl -R /tmp/dir &gt; acl.txt<br><span class="hljs-comment">#æ¶ˆé™¤ACLæƒé™</span><br>setfacl -R -b /tmp/dir<br><span class="hljs-comment">#è¿˜åŸACLæƒé™</span><br>setfacl -R --set-file=acl.txt /tmp/dir<br><span class="hljs-comment">#è¿˜åŸACLæƒé™</span><br>setfacl --restore acl.txt<br><span class="hljs-comment">#æŸ¥çœ‹ACLæƒé™</span><br>getfacl -R /tmp/dir<br></code></pre></td></tr></table></figure>



<span id="more"></span>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/yindong.github.io/categories/Linux/">Linux</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/yindong.github.io/2022/07/23/%E6%A0%87%E5%87%86I-O%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E7%AE%A1%E9%81%93/">
                        <span class="hidden-mobile">æ ‡å‡†I/Oé‡å®šå‘å’Œç®¡é“</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"knuxEHqBq6jIyCQJbdTG3FkD-gzGzoHsz","appKey":"cSdmOPjJK71fCLznx58yl98p","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- LeanCloud ç»Ÿè®¡PV -->
        <span id="leancloud-site-pv-container" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="leancloud-site-pv"></span>
             æ¬¡
          </span>
      
      
        <!-- LeanCloud ç»Ÿè®¡UV -->
        <span id="leancloud-site-uv-container" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="leancloud-site-uv"></span>
             äºº
          </span>
      

    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/yindong.github.io/js/events.js" ></script>
<script  src="/yindong.github.io/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/yindong.github.io/js/local-search.js" ></script>



  
    <script  src="/yindong.github.io/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  




  <script defer src="/yindong.github.io/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/yindong.github.io/js/boot.js" ></script>


</body>
</html>
